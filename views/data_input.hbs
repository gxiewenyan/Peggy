<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>数据录入</title>
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/style.css">

</head>
<body>
<div class="container">
    {{> nav }}
    <form action="dataSubmit" method="POST">
    <div class="form-row">
        <div class="form-group col-md-6">
            <label for="inputState">科室</label>
            <select id="inputState" class="form-control" name="office_id">
                {{#each this}}
                    <option value="{{id}}">{{name}}</option>
                {{/each}}
            </select>
        </div>
        <div class="form-group col-md-4">
            <label for="inputState">年份</label>
            <select id="inputState" class="form-control" name="year">
                <option value="2017">2017</option>
                <option value="2018">2018</option>
                <option value="2019">2019</option>
            </select>
        </div>
        <div class="form-group col-md-2">
            <label for="inputState">月份</label>
            <select id="inputState" class="form-control" name="month">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
            </select>
        </div>
    </div>

    <div class="accordion" id="accordionExample">
        <div class="card">
            <div class="card-header" id="headingOne">
                <h5 class="mb-0">
                    <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                        人工成本（共：<span id="labour_cost_total_display">0</span>元）
                        <input type="hidden" name="labour_cost_total" id="labour_cost_total_hidden_input" value="0">
                    </button>
                </h5>
            </div>
            <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordionExample">
                <div class="card-body">
                    <div class="form-group row">
                        <label for="labour_cost_salary" class="col-sm-2 col-form-label">工资(含政府补助）</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="labour_cost_salary" name="labour_cost_salary" value="0" placeholder="工资(含政府补助）">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="labour_cost_social_security" class="col-sm-2 col-form-label">社会保险费用</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="labour_cost_social_security" name="labour_cost_social_security" value="0" placeholder="社会保险费用">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="labour_cost_commercial_insurance" class="col-sm-2 col-form-label">商业保险费用</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="labour_cost_commercial_insurance" name="labour_cost_commercial_insurance" value="0" placeholder="商业保险费用">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="labour_cost_allowance" class="col-sm-2 col-form-label">福利费</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="labour_cost_allowance" name="labour_cost_allowance" value="0" placeholder="福利费">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="labour_cost_training" class="col-sm-2 col-form-label">教育培训经费</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="labour_cost_training" name="labour_cost_training" value="0" placeholder="教育培训经费">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="labour_cost_trade_union" class="col-sm-2 col-form-label">工会经费</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="labour_cost_trade_union" name="labour_cost_trade_union" value="0" placeholder="工会经费">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="labour_cost_labor_protection" class="col-sm-2 col-form-label">劳动保护费用</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="labour_cost_labor_protection" name="labour_cost_labor_protection" value="0" placeholder="劳动保护费用">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="labour_cost_housing" class="col-sm-2 col-form-label">住房费用</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="labour_cost_housing" name="labour_cost_housing" value="0" placeholder="住房费用">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="labour_cost_tech_award" class="col-sm-2 col-form-label">技术奖酬金</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="labour_cost_tech_award" name="labour_cost_tech_award" value="0" placeholder="技术奖酬金">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="labour_cost_non_monetary" class="col-sm-2 col-form-label">非货币福利</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="labour_cost_non_monetary" name="labour_cost_non_monetary" value="0" placeholder="非货币福利">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="labour_cost_other" class="col-sm-2 col-form-label">其他人工成本</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="labour_cost_other" name="labour_cost_other" value="0" placeholder="其他人工成本">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-header" id="headingTwo">
                <h5 class="mb-0">
                    <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                        办公费（共：<span id="admin_cost_total_display">0</span>元）
                        <input type="hidden" name="admin_cost_total" id="admin_cost_total_hidden_input" value="0">
                    </button>
                </h5>
            </div>
            <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
                <div class="card-body">
                    <div class="form-group row">
                        <label for="admin_cost_phone" class="col-sm-2 col-form-label">固定电话费</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="admin_cost_phone" name="admin_cost_phone" value="0" placeholder="固定电话费">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="admin_cost_mobile" class="col-sm-2 col-form-label">手机费</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="admin_cost_mobile" name="admin_cost_mobile" value="0" placeholder="手机费">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="admin_cost_post" class="col-sm-2 col-form-label">邮电费</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="admin_cost_post" name="admin_cost_post" value="0" placeholder="邮电费">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="admin_cost_books" class="col-sm-2 col-form-label">书报杂志费</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="admin_cost_books" name="admin_cost_books" value="0" placeholder="书报杂志费">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="admin_cost_other" class="col-sm-2 col-form-label">其他办公费</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="admin_cost_other" name="admin_cost_other" value="0" placeholder="其他办公费">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-header" id="headingThree">
                <h5 class="mb-0">
                    <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                        折旧费（共：<span id="depreciation_cost_total_display">0</span>元）
                        <input type="hidden" name="depreciation_cost_total" id="labour_cost_total_hidden_input" value="0">
                    </button>
                </h5>
            </div>
            <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordionExample">
                <div class="card-body">
                    <div class="form-group row">
                        <label for="depreciation_cost" class="col-sm-2 col-form-label">折旧费</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="depreciation_cost" name="depreciation_cost" value="0" placeholder="折旧费">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-header" id="headingFour">
                <h5 class="mb-0">
                    <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                        可变动成本（共：<span id="variable_cost_total_display">0</span>元）
                        <input type="hidden" name="variable_cost_total" id="variable_cost_total_hidden_input" value="0">
                    </button>
                </h5>
            </div>
            <div id="collapseFour" class="collapse" aria-labelledby="headingFour" data-parent="#accordionExample">
                <div class="card-body">
                    <div class="form-group row">
                        <label for="variable_cost_trip" class="col-sm-2 col-form-label">差旅费</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="variable_cost_trip" name="variable_cost_trip" value="0" placeholder="差旅费">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="variable_cost_water_eletric" class="col-sm-2 col-form-label">水电费</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="variable_cost_water_eletric" name="variable_cost_water_eletric" value="0" placeholder="水电费">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="variable_cost_repair" class="col-sm-2 col-form-label">修理费</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="variable_cost_repair" name="variable_cost_repair" value="0" placeholder="修理费">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="variable_cost_consumable" class="col-sm-2 col-form-label">低值易耗品摊销</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="variable_cost_consumable" name="variable_cost_consumable" value="0" placeholder="低值易耗品摊销">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="variable_cost_rental" class="col-sm-2 col-form-label">租赁费</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="variable_cost_rental" name="variable_cost_rental" value="0" placeholder="租赁费">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="variable_cost_meeting" class="col-sm-2 col-form-label">会议费</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="variable_cost_meeting" name="variable_cost_meeting" value="0" placeholder="会议费">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="variable_cost_advertisement" class="col-sm-2 col-form-label">广告费</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="variable_cost_advertisement" name="variable_cost_advertisement" value="0" placeholder="广告费">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="variable_cost_greening" class="col-sm-2 col-form-label">绿化费</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="variable_cost_greening" name="variable_cost_greening" value="0" placeholder="绿化费">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="variable_cost_hospitality" class="col-sm-2 col-form-label">业务招待费</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="variable_cost_hospitality" name="variable_cost_hospitality" value="0" placeholder="业务招待费">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="variable_cost_decoration" class="col-sm-2 col-form-label">装修工程</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="variable_cost_decoration" name="variable_cost_decoration" value="0" placeholder="装修工程">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="variable_cost_sales_service" class="col-sm-2 col-form-label">销售服务费</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="variable_cost_sales_service" name="variable_cost_sales_service" value="0" placeholder="销售服务费">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="variable_cost_consultant" class="col-sm-2 col-form-label">咨询费/审计费</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="variable_cost_consultant" name="variable_cost_consultant" value="0" placeholder="咨询费/审计费">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="variable_cost_services" class="col-sm-2 col-form-label">出版/文献/信息传播/知识产权事务费</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="variable_cost_services" name="variable_cost_services" value="0" placeholder="出版/文献/信息传播/知识产权事务费">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="variable_cost_sampling" class="col-sm-2 col-form-label">抽样费</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="variable_cost_sampling" name="variable_cost_sampling" value="0" placeholder="抽样费">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="variable_cost_inspection" class="col-sm-2 col-form-label">商品检验费及外协费</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="variable_cost_inspection" name="variable_cost_inspection" value="0" placeholder="商品检验费及外协费">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="variable_cost_tax" class="col-sm-2 col-form-label">税金</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="variable_cost_tax" name="variable_cost_tax" value="0" placeholder="税金">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="variable_cost_cleaning" class="col-sm-2 col-form-label">卫生保洁费</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="variable_cost_cleaning" name="variable_cost_cleaning" value="0" placeholder="卫生保洁费">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="variable_cost_vehicle" class="col-sm-2 col-form-label">汽车费用</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="variable_cost_vehicle" name="variable_cost_vehicle" value="0" placeholder="汽车费用">
                        </div>
                    </div>

                    <div class="form-group row">
                        <label for="variable_cost_other" class="col-sm-2 col-form-label">其他（含非常损失）</label>
                        <div class="col-sm-10">
                            <input type="number" step="0.01" class="form-control" id="variable_cost_other" name="variable_cost_other" value="0" placeholder="其他（含非常损失）">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <button type="submit" class="btn btn-primary btn-block mt-3" id="submit">提交</button>
    </form>
</div>
</body>
<script src="/js/jquery-3.3.1.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script>
    (function(){
        $('#accordionExample .form-control').on('blur', function(){
            var self = $(this);
            var cardBodyEle = self.parent().parent().parent();
            var siblingsInputs = cardBodyEle.find('.form-control');
            var cardHeaderEle = cardBodyEle.parent().siblings('.card-header');
            var totalDisplayEle = cardHeaderEle.find('span');
            var totalHiddenInput = cardHeaderEle.find('input');

            var totalVal = 0;
            for(var i = 0, length = siblingsInputs.length; i < length; i++){
                var inputVal = siblingsInputs.eq(i).val()
                totalVal += (inputVal == '' ? 0 : parseFloat(inputVal));
            }

            totalDisplayEle.html(totalVal);
            totalHiddenInput.val(totalVal);
        });

    })()
</script>
</html>